@isTest
public class OppurtunityTriggerTest 
{
    @testSetup static void setupDataForOppurtunityTrigger() 
    {
        Account acc = new Account(Name = 'TestAccount');
        insert acc;
        Contact ct = new Contact(Lastname = 'TestConatct', AccountId = acc.Id);
        insert ct;
        Opportunity op = new Opportunity();
        op.Name = 'newOppourtnity';
        op.Amount = 500;
        op.CloseDate = System.today().addDays(-2);
        op.StageName = 'Prospecting';
        insert op;
        op.BillToContact__c = ct.Id;
        op.StageName = 'Closed Won';
        update op;
    }
    //Test the value of manager field is getting autopopulated or not
    @isTest 
    static void testAutoPopulatedContact_getSucessRespond() 
    {
        Id newOpportunityManager = [SELECT Manager__c FROM Opportunity WHERE Name = 'newOppourtnity'].Manager__c;
        String managerName = [SELECT Name FROM Account WHERE Id = :newOpportunityManager].Name;
        System.assertEquals('TestAccount', managerName);//Test The name of Manager
    }
    @isTest 
    static void testCloseDateCloseWon_getSucessRespond() 
    {
        Opportunity newOpportunity = [SELECT Manager__c, CloseDate, StageName FROM Opportunity WHERE Name = 'newOppourtnity'];
        System.assertEquals(newOpportunity.CloseDate, System.today());//Test The name of Manager
    }
}

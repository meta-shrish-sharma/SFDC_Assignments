@isTest
public class ClassTriggerTest 
{
    @testSetup 
    static void dataSetupForTeacherTriggerTest() 
    {
        Class__c cls = new Class__c(Name = 'TestClass', MaxSize__c = 3, MyCount__c = 0);
        insert cls;
        List<Student__c> st = new List<Student__c>();
        for(Integer studentCount = 0;studentCount < 3 ;studentCount++) 
        {
            st.add(new Student__c(Name = 'TestStudent' + studentCount, Sex__c = 'F', LastName__c = 'Lastname' + studentCount, Class__c = cls.Id));
        }
        insert st;
    }
    @isTest 
    static void testClassTrigger_deleteClassWithFemaleStudents_getSuccessResponse() 
    {
        String operationResult;// Used to save the result of delete teacher
        Class__c testClass = [SELECT Id FROM Class__c WHERE Name = 'TestClass'];
        Test.startTest();
        try
        {
            delete testClass;
        }
        catch(Exception e)
        {
            operationResult = e.getMessage();
        }
        Test.stopTest();
        System.assert(operationResult.contains('Cannot delete this class'));
    }
    @isTest 
    static void testClassTrigger_resetClassDeleteStudents_getSuccessResponse() 
    {
        Class__c testClass = [SELECT Id FROM Class__c WHERE Name = 'TestClass'];
        testClass.Custom_Status__c = 'Reset';
        Test.startTest();
        Update testClass;
        Test.stopTest();
        List<Student__c> stdntList = [SELECT Id FROM Student__c WHERE Class__c = :testClass.Id];
        System.assertEquals(0, stdntList.size());// All students should get deleted and size should be 0
    }
}

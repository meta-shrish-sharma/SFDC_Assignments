@isTest(SeeAllData=true)
public class CloseOpportunityTest {
    @isTest static void TestCloseDate() 
    {
        Opportunity op = new opportunity();
        op.Name = 'New Oppournity';
        op.StageName = 'Prospecting';
        op.CloseDate = system.today().addDays(-1);
        insert op;
        system.debug(op.Id+'');
        Opportunity opUpdate = [SELECT CloseDate FROM Opportunity WHERE ID = :op.Id][0];
        opUpdate.StageName = 'Closed Won';
        Test.startTest();
        update opUpdate;
        Test.stopTest();
        Opportunity opAfterUpdate = [SELECT CloseDate FROM Opportunity WHERE ID = :op.Id][0];
        system.debug(opUpdate.CloseDate+' ' + opAfterUpdate.CloseDate+'');
        system.assertEquals(system.today(), opAfterUpdate.CloseDate);
       
        
    }

}
public class UpdateBillToContactController {
	 public String currentPageId { get; set; }
	 public String selectedCard{get; set;}
	 public List<Contact> contactList {get; set;}	
     Opportunity opr{get; set;} 
    public UpdateBillToContactController(){
       currentPageId = ApexPages.currentPage().getParameters().get('id');
		
    }
    Public List<Contact> getContacts()
    {
        contactList = new List<Contact>();
        ID accID = [SELECT manager__c FROM Opportunity WHERE id  = :currentPageId][0].id;
        contactList = [SELECT name, id, Birthdate, Department FROM contact WHERE OwnerId in (SELECT OwnerId FROM account WHERE id  = :accID)];
        return contactList;
    }
    public List<SelectOption> getRecords()
    {
        
        List<Contact> contactList = getContacts();
        List<SelectOption> cntctListSelection = new List<SelectOption>();
        ID accID = [SELECT manager__c FROM Opportunity WHERE id  = :currentPageId][0].manager__c;
        contactList = [SELECT name, id, Birthdate, Department FROM contact WHERE OwnerId in (SELECT OwnerId FROM account WHERE id  = :accID)]; 
        for(Contact cntct : contactList)
        {
            cntctListSelection.add(new SelectOption(cntct.id,cntct.name+'/'+cntct.Birthdate+'/'+cntct.Department));
        }
        return cntctListSelection;
    }
	public void m1()
    {
         system.debug(selectedCard+'selectID'+ currentPageId);  
         Opportunity op = [select name, BillToContact__c from opportunity where id = :currentPageId LIMIT 1];  
		 op.BillToContact__c = selectedCard; 
         update op;
        
    }
   public PageReference returnSavePage() {
        // Send the user to the detail page for the new account.
        Opportunity op = [select name, BillToContact__c from opportunity where id = :currentPageId LIMIT 1];  
		 op.BillToContact__c = selectedCard; 
         update op;
        PageReference nextPage = new PageReference('/' + op.Id);
        return nextPage;
    }
    public PageReference returnCancelPage() {
        
        PageReference nextPage = new PageReference('/' + currentPageId);
        return nextPage;
    }
    public PageReference returnClearPage() {
        // Send the user to the detail page for the new account.
        Opportunity op = [select name, BillToContact__c from opportunity where id = :currentPageId LIMIT 1];  
		 op.BillToContact__c = null; 
         update op;
        PageReference nextPage = new PageReference('/' + op.Id);
        return nextPage;
    }
    
}
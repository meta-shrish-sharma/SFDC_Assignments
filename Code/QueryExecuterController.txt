public class QueryExecuterController 
{
    public List<sObject> lstObjs {get;set;}
    public List<string> lstFlds {get;private set;}
    public String sortDirection {get;set;}
    private String sortExp = 'Name';
    public String sortExpression 
    {
        get
        {
            return sortExp;
        }
        set
        {
            //if the column is clicked on then switch between Ascending and Descending modes
            if (value == sortExp)
                sortDirection = (sortDirection == 'ASC')? 'DESC' : 'ASC';
            else
                sortDirection = 'ASC';
            sortExp = value;
        }
    }
    public QueryExecuterController()
    {
        lstFlds = new List<String>();
        string query = 'Select id, Name, BillingCity, BillingCountry, Phone FROM Account LIMIT 50';
        lstObjs = Database.query(query);
        Set<string> setFlds = new Set<String>();
        for(integer i=0;i<lstObjs.size();i++)
        {
            setFlds.addAll(lstObjs[i].getPopulatedFieldsAsMap().keySet());
        }
        lstFlds.addAll(setFlds);
        system.debug(lstFlds);
    }
    public PageReference ViewData() 
    {
        //build the full sort expression
        string sortFullExp = sortExp  + ' ' + sortDirection;
        //query the database based on the sort expression
        lstObjs = Database.query('Select id, Name, BillingCity, BillingCountry, Phone from Account order by ' + sortFullExp + ' limit 1000');
        return null;
    }
    
}